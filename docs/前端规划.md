  🎨 前端开发规划方案

  根据你的加密货币AI交易系统的架构,我建议采用以下前端开发规划:

  一、技术栈选择

  推荐方案:现代化Web技术栈

  前端框架: Next.js 14+ (React)
  UI组件库: shadcn/ui + Tailwind CSS
  状态管理: Zustand / TanStack Query
  图表库: TradingView Lightweight Charts / Recharts
  实时通信: WebSocket (Socket.io)
  类型安全: TypeScript

  选择理由:
  - Next.js: 支持SSR,性能优秀,适合数据密集型应用
  - shadcn/ui: 现代化UI组件,可定制性强,适合金融类界面
  - TradingView Charts: 专业的K线图表库,加密货币行业标准
  - WebSocket: 实时数据推送,适合交易系统

  二、前端架构设计

  frontend/
  ├── src/
  │   ├── app/                    # Next.js App Router
  │   │   ├── (dashboard)/       # 仪表盘布局组
  │   │   │   ├── overview/      # 总览页
  │   │   │   ├── trading/       # 交易页面
  │   │   │   ├── positions/     # 持仓管理
  │   │   │   ├── history/       # 历史记录
  │   │   │   ├── performance/   # 绩效分析
  │   │   │   └── settings/      # 系统设置
  │   │   ├── api/               # API路由(BFF层)
  │   │   └── layout.tsx         # 根布局
  │   │
  │   ├── components/            # UI组件
  │   │   ├── ui/               # shadcn基础组件
  │   │   ├── charts/           # 图表组件
  │   │   │   ├── CandlestickChart.tsx
  │   │   │   ├── PerformanceChart.tsx
  │   │   │   └── PortfolioChart.tsx
  │   │   ├── trading/          # 交易相关组件
  │   │   │   ├── OrderBook.tsx
  │   │   │   ├── PositionCard.tsx
  │   │   │   └── TradeSignal.tsx
  │   │   ├── ai/               # AI决策展示
  │   │   │   ├── DecisionLog.tsx
  │   │   │   ├── ReasoningPanel.tsx
  │   │   │   └── MemoryViewer.tsx
  │   │   └── layout/           # 布局组件
  │   │       ├── Navbar.tsx
  │   │       └── Sidebar.tsx
  │   │
  │   ├── lib/                  # 工具库
  │   │   ├── api/             # API客户端
  │   │   │   ├── client.ts
  │   │   │   ├── market.ts
  │   │   │   ├── trading.ts
  │   │   │   └── portfolio.ts
  │   │   ├── hooks/           # 自定义Hooks
  │   │   │   ├── useMarketData.ts
  │   │   │   ├── useWebSocket.ts
  │   │   │   └── usePortfolio.ts
  │   │   ├── utils/           # 工具函数
  │   │   └── constants.ts     # 常量定义
  │   │
  │   ├── stores/              # 状态管理
  │   │   ├── marketStore.ts
  │   │   ├── portfolioStore.ts
  │   │   └── uiStore.ts
  │   │
  │   └── types/               # TypeScript类型定义
  │       ├── market.ts
  │       ├── trading.ts
  │       └── api.ts
  │
  ├── public/                  # 静态资源
  ├── package.json
  ├── tsconfig.json
  └── tailwind.config.ts

  三、核心页面功能设计

  1. 总览仪表盘 (Dashboard Overview)

  功能模块:
  - 投资组合总览卡片(总价值、24h收益、总收益率)
  - 持仓列表(实时价格、收益情况)
  - 最近决策日志(AI决策理由展示)
  - 市场行情概览(关注币种)
  - 系统运行状态指示器

  2. 交易页面 (Trading)

  功能模块:
  - 左侧: K线图表(TradingView)
    - 支持多时间周期切换
    - 技术指标叠加(MA/EMA/RSI/MACD)
    - AI决策点位标注
  - 中间: 订单簿深度图
  - 右侧:
    - 当前交易信号
    - AI决策推理过程
    - 风险评估结果

  3. 持仓管理 (Positions)

  功能模块:
  - 持仓列表表格
    - 币种、数量、成本、当前价、收益率、操作
  - 持仓分布饼图
  - 单个持仓详情
    - 交易历史时间线
    - AI决策历史
    - 止盈止损设置

  4. 绩效分析 (Performance)

  功能模块:
  - 净值曲线图(与BTC对比)
  - 关键指标卡片
    - 夏普比率、最大回撤、胜率、年化收益
  - 月度/周度收益热力图
  - 交易统计分析
    - 盈亏比分布
    - 持仓时长分析
  - AI反思记录查看器

  5. 决策历史 (AI Decision Log)

  功能模块:
  - 决策时间线
    - 战略层决策(市场制度判断)
    - 战术层决策(具体交易信号)
  - 决策详情面板
    - 输入上下文(市场状态、记忆检索)
    - LLM推理过程
    - 使用的工具调用
    - 最终决策输出
    - 执行结果反馈

  6. 系统设置 (Settings)

  功能模块:
  - 风险参数配置
    - 最大仓位、止损比例、单日最大亏损
  - 策略参数调整
  - 交易所API配置
  - 系统开关控制
    - 自动交易开关
    - 紧急熔断开关
  - 通知设置

  四、关键技术实现

  1. 实时数据推送架构

  // useWebSocket.ts
  export function useMarketWebSocket(symbol: string) {
    const [data, setData] = useState<Ticker | null>(null);

    useEffect(() => {
      const ws = new WebSocket(`ws://localhost:8000/ws/market/${symbol}`);

      ws.onmessage = (event) => {
        const ticker = JSON.parse(event.data);
        setData(ticker);
      };

      return () => ws.close();
    }, [symbol]);

    return data;
  }

  2. API客户端封装

  // lib/api/client.ts
  import { z } from 'zod';

  export class APIClient {
    constructor(private baseURL: string) {}

    async getPortfolio() {
      const response = await fetch(`${this.baseURL}/api/portfolio`);
      return PortfolioSchema.parse(await response.json());
    }

    async getDecisionHistory(limit: number = 50) {
      const response = await fetch(`${this.baseURL}/api/decisions?limit=${limit}`);
      return DecisionHistorySchema.parse(await response.json());
    }
  }

  3. 状态管理示例

  // stores/portfolioStore.ts
  import { create } from 'zustand';

  interface PortfolioStore {
    portfolio: Portfolio | null;
    positions: Position[];
    fetchPortfolio: () => Promise<void>;
    updatePosition: (symbol: string, position: Position) => void;
  }

  export const usePortfolioStore = create<PortfolioStore>((set) => ({
    portfolio: null,
    positions: [],

    fetchPortfolio: async () => {
      const data = await api.getPortfolio();
      set({ portfolio: data.portfolio, positions: data.positions });
    },

    updatePosition: (symbol, position) => {
      set((state) => ({
        positions: state.positions.map(p =>
          p.symbol === symbol ? position : p
        )
      }));
    }
  }));

  五、与后端API对接规划

  需要后端提供的REST API端点:

  // 市场数据
  GET  /api/market/{symbol}/ticker          # 获取ticker
  GET  /api/market/{symbol}/ohlcv           # 获取K线数据
  GET  /api/market/{symbol}/orderbook       # 获取订单簿

  // 投资组合
  GET  /api/portfolio                        # 获取投资组合
  GET  /api/portfolio/positions             # 获取所有持仓
  GET  /api/portfolio/positions/{symbol}    # 获取单个持仓

  // 交易
  GET  /api/trades                          # 获取交易历史
  POST /api/trades                          # 手动下单(紧急情况)
  GET  /api/orders                          # 获取订单列表

  // 决策
  GET  /api/decisions                       # 获取决策历史
  GET  /api/decisions/{id}                  # 获取决策详情
  GET  /api/decisions/latest                # 获取最新决策

  // 绩效
  GET  /api/performance/metrics             # 获取绩效指标
  GET  /api/performance/equity-curve        # 获取净值曲线
  GET  /api/performance/trades-stats        # 获取交易统计

  // 系统
  GET  /api/system/status                   # 系统状态
  POST /api/system/control                  # 系统控制(开关)
  GET  /api/system/logs                     # 系统日志

  // WebSocket
  WS   /ws/market/{symbol}                  # 市场实时数据
  WS   /ws/decisions                        # 决策实时推送
  WS   /ws/portfolio                        # 组合变动推送

  六、开发阶段规划

  Phase 1: 基础框架搭建 (Week 1)
  - 初始化Next.js项目
  - 配置TypeScript、Tailwind、shadcn/ui
  - 搭建基础路由和布局
  - 实现基础API客户端

  Phase 2: 核心页面开发 (Week 2-3)
  - 总览仪表盘
  - 交易页面(K线图表集成)
  - 持仓管理页面
  - 绩效分析页面

  Phase 3: 实时数据集成 (Week 3-4)
  - WebSocket连接实现
  - 实时数据推送到UI
  - 状态管理优化
  - 图表实时更新

  Phase 4: AI决策可视化 (Week 4-5)
  - 决策历史时间线
  - 决策推理过程展示
  - 记忆检索可视化
  - 工具调用展示

  Phase 5: 测试与优化 (Week 5-6)
  - 端到端测试
  - 性能优化
  - 响应式设计调整
  - 错误处理完善

  七、额外建议

  1. 移动端支持: 使用响应式设计,后期可考虑PWA
  2. 主题切换: 支持深色/浅色模式(金融界面通常用深色)
  3. 数据缓存: 使用TanStack Query进行智能缓存
  4. 错误边界: 完善的错误处理和提示
  5. 权限管理: 添加用户认证和权限控制

  你觉得这个规划如何?需要我详细展开某个具体部分,或者直接开始搭建前端框架吗?